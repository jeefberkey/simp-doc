

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.7.2. HOWTO Change Puppet Masters &mdash; SIMP 5.2.1-0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css_overrides.css" type="text/css" />
  

  
    <link rel="top" title="SIMP 5.2.1-0 documentation" href="../../index.html"/>
        <link rel="up" title="4.7. SIMP HOWTO Guides" href="../HOWTO.html"/>
        <link rel="next" title="4.7.3. HOWTO Disable DHCP" href="Disable_dhcpd.html"/>
        <link rel="prev" title="4.7.1.2. Elasticsearch, Logstash, and Grafana" href="Central_Log_Collection/Logstash.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../../index.html">
        

        
          
          <img src="../../_static/SIMP_Logo.png" class="logo" />
        
        </a>

        
          
          
            <div class="version">
              5.2.1
            </div>
          
        

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome to the SIMP documentation!</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting_started_guide/Just_Install.html">1. For the Impatient</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dynamic/Changelog.html">2. Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started_guide/index.html">3. Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">4. User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Introduction.html">4.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Client_Management.html">4.2. Client Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../SIMP_Administration.html">4.3. General Administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../User_Management.html">4.4. User Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Hiera_Overview.html">4.5. Hiera Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Troubleshooting.html">4.6. Troubleshooting Common Issues</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../HOWTO.html">4.7. SIMP HOWTO Guides</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Central_Log_Collection.html">4.7.1. Setup Central Log Collection</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">4.7.2. Change Puppet Masters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#on-the-client">4.7.2.1. On the Client</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-the-old-puppet-master">4.7.2.2. On the Old Puppet Master</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Disable_dhcpd.html">4.7.3. Disable dhcpd</a></li>
<li class="toctree-l3"><a class="reference internal" href="Disable_named.html">4.7.4. Disable named</a></li>
<li class="toctree-l3"><a class="reference internal" href="Discard_Mail_to_Root.html">4.7.5. Discard Mail to Root</a></li>
<li class="toctree-l3"><a class="reference internal" href="Exclude_Repositories.html">4.7.6. Exclude YUM Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="NFS.html">4.7.7. Configure NFS</a></li>
<li class="toctree-l3"><a class="reference internal" href="IPTables_NAT_Rules.html">4.7.8. Configure IPTables NAT Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="Kerberos.html">4.7.9. Enable Kerberos</a></li>
<li class="toctree-l3"><a class="reference internal" href="Managing_Workstation_Infrastructures.html">4.7.10. Manage Workstation Infrastructures</a></li>
<li class="toctree-l3"><a class="reference internal" href="Network_Build.html">4.7.11. Kickstart the Initial Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="Puppetmaster_Backup.html">4.7.12. Backup the Puppet Master</a></li>
<li class="toctree-l3"><a class="reference internal" href="Puppet_Server_NAT.html">4.7.13. Configure a Puppet Server Behind a NAT</a></li>
<li class="toctree-l3"><a class="reference internal" href="Redundant_LDAP.html">4.7.14. Enable Redundent LDAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="SFTP_Restricted_Accounts.html">4.7.15. Enable SFTP Restricted Accounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="SSH_Keys.html">4.7.16. Setup SSH Authorized Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="Upgrade_SIMP.html">4.7.17. Upgrade SIMP (Coming Soon!)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Manage_TPM.html">4.7.18. Manage TPM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../SIMP_Package_Data.html">4.8. Package Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#indices-and-tables">4.9. Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributors_guide/index.html">5. Contributing to SIMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security_conop/index.html">6. Security Concept of Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security_mapping/index.html">7. Security Control Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help/index.html">8. Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">9. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html#contact">10. Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">11. Glossary of Terms</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">SIMP</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">4. SIMP User Guide</a> &raquo;</li>
      
          <li><a href="../HOWTO.html">4.7. SIMP HOWTO Guides</a> &raquo;</li>
      
    <li>4.7.2. HOWTO Change Puppet Masters</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/user_guide/HOWTO/Changing_Puppet_Masters.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="howto-change-puppet-masters">
<h1>4.7.2. HOWTO Change Puppet Masters<a class="headerlink" href="#howto-change-puppet-masters" title="Permalink to this headline">¶</a></h1>
<p>It may be necessary to change the Puppet Master. To point a particular
client to a new Puppet Master, follow the steps in the sections below.</p>
<div class="section" id="on-the-client">
<h2>4.7.2.1. On the Client<a class="headerlink" href="#on-the-client" title="Permalink to this headline">¶</a></h2>
<p>Enter the following changes into the <em>/etc/puppetlabs/puppet/puppet.conf</em> file.</p>
<p>Code Changes on Client to Switch Puppet Masters</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">server</span> <span class="o">=</span> <span class="s">new.puppet.master.fqdn</span>
<span class="na">ca_server</span> <span class="o">=</span> <span class="s">new.puppet.master.fqdn</span>
<span class="na">ca_port</span> <span class="o">=</span> <span class="s">8141</span>
</pre></div>
</div>
<p>To remove all files and sub-directories in the <code class="docutils literal"><span class="pre">/etc/puppetlabs/puppet/ssl</span></code>
directory, type <code class="docutils literal"><span class="pre">cd</span> <span class="pre">/etc/puppetlabs/puppet/ssl</span></code>. Then type <code class="docutils literal"><span class="pre">rm</span> <span class="pre">-rf</span> <span class="pre">./*</span></code>.</p>
<p>Assuming the new Puppet Master has been set up to properly accept the
client, type <code class="docutils literal"><span class="pre">puppet</span> <span class="pre">agent</span> <span class="pre">--test</span></code> to run a full Puppet run while
pointing to the new server.</p>
<p>If all goes well, the client will now be synchronized with the new
Puppet Master. If not, refer to the SIMP Server Installation section of
the SIMP Install Guide and ensure that the new Puppet Master was set up
properly.</p>
</div>
<div class="section" id="on-the-old-puppet-master">
<h2>4.7.2.2. On the Old Puppet Master<a class="headerlink" href="#on-the-old-puppet-master" title="Permalink to this headline">¶</a></h2>
<p>Remove or comment out all items for the client node in the <code class="docutils literal"><span class="pre">/etc/puppetlabs/code/environments/simp/hieradata/hosts</span></code> space.</p>
<p>To run <code class="docutils literal"><span class="pre">puppet</span> <span class="pre">agent</span></code> in <em>noop</em> mode to ensure that there are no
inadvertent errors, type <code class="docutils literal"><span class="pre">puppet</span> <span class="pre">agent</span> <span class="pre">--test</span> <span class="pre">--noop</span></code>.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Disable_dhcpd.html" class="btn btn-neutral float-right" title="4.7.3. HOWTO Disable DHCP" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Central_Log_Collection/Logstash.html" class="btn btn-neutral" title="4.7.1.2. Elasticsearch, Logstash, and Grafana" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, THE SIMP TEAM.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'4.2.X',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>